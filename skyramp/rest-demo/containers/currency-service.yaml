containers:
  - name: currency-service
    image:
      repository: public.ecr.aws/j1n2c2p2/microservices-demo/currencyservice
      tag: v0.3.9
    services:
      - currency-service-port60000
    envs:
      PORT: "7000"
      DISABLE_TRACING: "1"
      DISABLE_PROFILER: "1"
      DISABLE_DEBUGGER: "1"

services:
  - name: currency-service-port60000
    port: 60000
    secure: false
    protocol: rest
    endpoints:
      - currency-service-list-supported-currencies
      - currency-service-convert

endpoints:
  - name: currency-service-list-supported-currencies
    path: "/list-supported-currencies"
    methods:
      - type: 'GET'
        responseValue: GetSupportedCurrenciesResponse
        name: currency-service-list-get
  - name: currency-service-convert
    path: "/convert"
    methods:
      - type: 'GET'
        responseValue: ConvertResponse
        name: currency-service-get

responseValues:
  - name: GetSupportedCurrenciesResponse
    blob: |
      [
        "USD",
        "CAD",
        "SEK",
        "NOK",
        "EUR",
        "GBP",
        "JPY",
        "CZK"
      ]
  - name: ConvertResponse
    blob: |
      {
        "currency_code": "CAD",
        "units": 130,
        "nanos": 99000000
      }
